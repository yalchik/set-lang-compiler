// Программа объединения множеств
//!примечание: объединить множества можно с при помощи операции +
// например var union = s1 + s2;
// но данная программа показывает, как реализовать объединение
// без использования данной операции

// объявления
function union(var s1, var s2);
function contains(var set, var elem);

// определение входной функции
def main() {
	var s1 = {1, 2, 3.1};
	var s2 = {2, 3.1, 4.2};
	var union = union(s1, s2);
	write: union;
}

// функция объединения двух множеств
def union(var s1, var s2) {
	// инициализируем значением другой переменной
	// !внимание: типизация динамическая, и не факт, что сюда подадут множество
	// если оказалось, что s1 или s2 - не множества, то результат будет непредсказуемым
	// но это не вина компилятора, т.к. он не должен следить за типами
	// типы определяются во время выполнения (runtime)
	var result = s2;
	// для каждого элемента из множества s1
	var elem;
	for (elem : s1) {
		// если этот элемент не принадлежит множеству s2
		if (contains(s2, elem) == 0) {
			// добавляем его в результирующее множество
			result = result + elem;
		}
	}
	return result;
}

// функция для определения принадлежности элемента множеству
def contains(var set, var elem) {
	var e;
	for (e : set) {
		if (e == elem) {
			return 1;
		}
	}
	return 0;
}